!function() {
    function r() {
        return {
            mode: "production",
            apiUrl: window.location.href + "server/",
            cookieVar: "ewallet"
        };
    }
    function a() {
        return {
            render: function(o) {
                $("#render").html(o);
            },
            log: function(o) {
                "production" == config().mode && console.log(o);
            },
            setCookie: function(o) {
                localStorage.setItem(r().cookieVar, o);
            },
            getCookie: function() {
                return localStorage.getItem(r().cookieVar);
            }
        };
    }
    $(document).on("click", "#login", function(o) {
        o.preventDefault();
        var e = $("#loginView").html();
        a().render(e);
    }), $(document).on("submit", "#login-form", function(o) {
        o.preventDefault();
        var e = {};
        e.email = document.forms.form.email.value, e.password = document.forms.form.password.value;
        var n, t;
        (n = e, t = {
            url: "login",
            payload: n
        }, $.post(r().apiUrl + t.url, t.payload)).then(function(o) {
            a().log(o);
            var e = o.data.token;
            if (a().setCookie({
                token: e
            }), "access_token=undefined" == result) alert("Invalid access"); else {
                Finch.navigate("dashboard");
                var n = $("#dashboardView").html();
                a.render(n);
            }
        }, function(o) {
            a().log(o);
        });
    });
}();